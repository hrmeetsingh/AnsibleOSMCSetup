---
- hosts: RaspberryPi
  vars_files:
   - vars.yml

  tasks:

   - name: Install regdb settings
     apt:
       name: wireless-regdb
       state: present

   - name: Install iw
     apt:
       name: iw
       state: present

   - name: Install crda
     apt:
       name: crda
       state: present

   - name: Get region status on device
     command: /sbin/iw reg get
     register: result

   - name: Set region if not done
     become: yes
     command: /sbin/iw reg set {{ region }}
     when: '"country 0" in result.stdout'

   - name: Create destination directory
     file: 
       path: /home/osmc/addons/ 
       state: directory
       owner: osmc
       group: osmc
       mode: 0775

   - name: Copy Youtube addon To Kodi
     copy:
       src: AddOns/plugin.video.youtube-5.5.1.zip
       dest: /home/osmc/addons/plugin.video.youtube-5.5.1.zip
       owner: osmc
       group: osmc
       mode: 0775
       
   - name: Copy DailyMotion addon To Kodi
     copy:
       src: AddOns/plugin.video.dailymotion-0.2.5.zip
       dest: /home/osmc/addons/plugin.video.dailymotion-0.2.5.zip
       owner: osmc
       group: osmc
       mode: 0775

   - name: Copy Kodil repository To Kodi
     copy:
       src: AddOns/repository.kodil-1.0.1.zip
       dest: /home/osmc/addons/repository.kodil-1.0.1.zip
       owner: osmc
       group: osmc
       mode: 0775
